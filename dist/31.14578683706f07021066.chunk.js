webpackJsonp([31],{795:function(e,n,t){"use strict";var a=t(0),s=t(109),i=t(61),o=function(){function CreateComponent(e,n){this.http=e,this.router=n,this.token=JSON.parse(localStorage.getItem("access_token")),this.investasi={access_token:this.token,invest_name:"My invest",type:"0",description:"Motor",images1:this.image,images2:this.image,images3:this.image,due_date:"",amount:null,interest:null,tenor:null,collateral:!0,fee:!0}}return CreateComponent.prototype.ngOnInit=function(){jQuery(".datepicker").datepicker({format:"yyyy/mm/dd"}),jQuery("#investasiForm").validate({rules:{invest_name:{required:!0},type:{required:!0},images1:{required:!0},masa_berlaku:{required:!0},amount:{required:!0},tenor:{required:!0},collateral:{required:!0},description:{required:!0}}})},CreateComponent.prototype.createInvestasi=function(e){if(jQuery("#investasiForm").valid()){this.investasi.due_date=jQuery("#masa_berlaku").datepicker("getDate");var n=new FileReader;n.onload=function(e,n){var t=e.target.result.split(",")[1];this.investasi.images1=t,console.log(t)}.bind(this);var t=new FileReader;t.onload=function(e,n){var t=e.target.result.split(",")[1];this.investasi.images2=t}.bind(this);var a=new FileReader;a.onload=function(n,t){var a=this,i=n.target.result.split(",")[1];this.investasi.images3=i,console.log(this.investasi);var o=new s.Headers({"Content-Type":"application/json",api_key:"01b19716dfe44d0e9c656903429c3e9c65d0b243"}),l=new s.RequestOptions({headers:o});this.http.post("http://masscredit-api.stagingapps.net/user/investment/new",e,l).map(function(e){return e.json()}).subscribe(function(e){var n=e.meta.code,t=e.meta.message;console.log(n,t),a.router.navigateByUrl("/dashboard/pinjaman")},function(e){var n=JSON.parse(e._body),t=n.meta.message;if("unauthorized"==t)return alert("Maaf session anda telah habis silahkan login kembali"),a.router.navigateByUrl("/dashboard/sign-out")})}.bind(this),console.log(this.investasi);var i=document.getElementById("image1"),o=document.getElementById("image2"),l=document.getElementById("image3"),r=i.files[0],d=o.files[0],c=l.files[0],p=n.readAsDataURL(r),u=t.readAsDataURL(d),m=a.readAsDataURL(c);this.investasi.images1=p,this.investasi.images2=u,this.investasi.images3=m}else alert("Data tidak valid")},CreateComponent.prototype.getTipeInvestasi=function(e){this.tipeInvest=e,console.log(e)},CreateComponent=__decorate([a.Component({selector:"create",template:t(908)}),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.Http&&s.Http)&&e||Object,"function"==typeof(n="undefined"!=typeof i.Router&&i.Router)&&n||Object])],CreateComponent);var e,n}();n.CreateComponent=o},796:function(e,n,t){"use strict";var a=t(0),s=t(61),i=t(109),o=t(153),l=t(72),r=t(795);n.routes=[{path:"",component:r.CreateComponent}];var d=function(){function CreateModule(){}return CreateModule.routes=n.routes,CreateModule=__decorate([a.NgModule({declarations:[r.CreateComponent],imports:[i.HttpModule,o.FormsModule,l.CommonModule,s.RouterModule.forChild(n.routes)],providers:[]}),__metadata("design:paramtypes",[])],CreateModule)}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=d},908:function(e,n){e.exports='<section class="content">\n <div class="row">\n   <div class="col-md-12">\n     <div class="box bg-transparent">\n       <div class="box-header">\n         <h2 class="box-title pull-left">Tambah Investasi</h2>\n       </div>\n       <div class="box-body">\n         <div class="form-login-register">\n           <form class="form-horizontal clearfix row" name="investasiForm" id="investasiForm">\n              <div class="col-md-6">\n                 <div class="form-group">\n                   <div class="col-md-12">\n                       <span class="required">*</span>\n                       <input type="text" name="invest_name" placeholder="Nama Investasi" class="form-control input-md" id="invest_name" [(ngModel)]="investasi.invest_name">\n                   </div>\n                 </div>\n                 <div class="form-group">\n                     <div class="col-md-12">\n                       <span class="required">*</span>\n                       <select class="form-control input-md" name="type" id="type" (change)="getTipeInvestasi($event.target.value)" [(ngModel)]="investasi.type">\n                          <option value="0" disabled>Tipe Investasi</option>\n                          <option [value]="1">Jaminan</option>\n                          <option [value]="2">Tanpa Jaminan</option>\n                       </select>\n                     </div>\n                 </div>\n                  <div class="form-group" *ngIf="tipeInvest == 1">\n                     <div class="col-md-12">\n                       <span class="required">*</span>\n                       <textarea placeholder="Deskripsi" class="form-control input-md"   name="description" id="description" [(ngModel)]="investasi.description">\n                          <font color="red">\n                          </font>\n                       </textarea>\n                     </div>\n                 </div>\n                 <div class="form-group">\n                   <div class="col-md-12">\n                     <div class="input-group">\n                       <input type="text" class="form-control" readonly>\n                       <label class="input-group-btn">\n                         <span class="btn btn-primary">\n                           Browse&hellip; <input type="file" style="display: none;" name="`s1" id="image1">\n                         </span>\n                       </label>\n                     </div>\n                   </div>\n                  <div class="col-md-12">\n                    <div class="input-group">\n                     <input type="text" class="form-control" readonly>                       \n                       <label class="input-group-btn">\n                         <span class="btn btn-primary">\n                           Browse&hellip; <input type="file" style="display: none;" name="images2" id="image2">\n                         </span>\n                       </label>\n                    </div>\n                  </div>\n                   <div class="col-md-12">\n                     <div class="input-group">\n                       <input type="text" class="form-control" readonly>\n                       <label class="input-group-btn">\n                         <span class="btn btn-primary">\n                           Browse&hellip; <input type="file" style="display: none;" name="images3" id="image3">\n                         </span>\n                       </label> \n                      </div>\n                    </div>\n                 </div>\n                 <div class="form-group">\n                 <div class="col-md-12">\n                     <span class="required">*</span>\n                     <input  type="text" placeholder="Masa Berlaku " name="masa_berlaku" class="form-control input-md datepicker" id="masa_berlaku">\n                 </div>\n                 </div>\n               </div>\n               <div class="col-md-6">\n                 <fieldset>\n                   <div class="form-group">\n                     <div class="col-md-10 clearfix">\n                       <span class="required">*</span>\n                       <input type="text" placeholder="Nominal Investasi" class="form-control input-md" name="amount" id="amount" [(ngModel)]="investasi.amount">\n                     </div>\n                       <label class="unit">Rupiah</label>\n                   </div>\n                   <div class="form-group">\n                     <div class="col-md-10 clearfix">\n                       <input type="text" placeholder="Bunga" class="form-control input-md"  name="interest" id="interest" [(ngModel)]="investasi.interest">\n                     </div>\n                       <label class="unit">%/bulan</label>\n                   </div>\n                   <div class="form-group">\n                     <div class="col-md-10 clearfix">\n                       <span class="required">*</span>\n                       <input type="text" placeholder="Tenor" class="form-control input-md" maxlength="2" minlength="1"  name="tenor" id="tenor" [(ngModel)]="investasi.tenor">\n                      </div>\n                      <label class="unit">Bulan</label>\n                   </div>\n                    <div class="form-group">\n                    <div class="col-md-10 clearfix">\n                       <span class="required">*</span>\n                       <input type="text" placeholder="Collateral" class="form-control input-md" name="collateral" id="collateral" [(ngModel)]="investasi.collateral">\n                    </div>\n                      <label class="unit">Bulan</label>\n                   </div>\n                   <div class="form-group">\n                     <div class="col-md-12">\n                       <input type="text" placeholder="Charge Free" class="form-control input-md" readonly>\n                     </div>\n                   </div>\n                   \n                 </fieldset>\n               </div>\n               <div class="col-md-12">\n                 <div class="form-group">\n                    <div class="col-md-6 col-center">\n                      <a href="#/dashboard/investasi" class="btn btn-default">Batal</a>\n                      <button class="btn btn-red" (click)="createInvestasi(investasi)">Simpan</button>\n                    </div>\n                 </div>\n              </div>\n           </form>\n         </div>\n       </div>\n    </div>\n   </div>\n </div>\n</section>'}});