webpackJsonp([9],{689:function(e,t,n){"use strict";var a=n(0),o=n(87),i=n(50),r=n(786),s=function(){function CreateComponent(e,t,n){this.http=e,this.router=t,this.createService=n,this.headers=new o.Headers({"Content-Type":"application/json",api_key:"01b19716dfe44d0e9c656903429c3e9c65d0b243"}),this.options=new o.RequestOptions({headers:this.headers}),this.postLoanUrl="https://masscredit-api.stagingapps.net/user/loan/new",this.getCategoryLoanUrl="https://masscredit-api.stagingapps.net/master/loan-category",this.loan={access_token:JSON.parse(localStorage.getItem("access_token")),loan_name:null,loan_category:0,other_category:null,image:null,description:null,amount:null,due_date:"",interest:null,tenor:null,password:null},this.loan_category={access_token:JSON.parse(localStorage.getItem("access_token"))},this.loan_categories=[],this.dataLoan=0,this.simulation={nominal:null,pokok:null,bunga:null,cicilan_perbulan:null,denda:null,sucess_fee:null},this.dataCalculation={jumlah:null,bunga:null,tenor:null}}return CreateComponent.prototype.ngOnInit=function(){this.getLoanCategory(),jQuery("#FormLoan").validate({rules:{loan_name:{required:!0},loan_category:{required:!0},due_date:{required:!0},amount:{required:!0},tenor:{required:!0},description:{required:!0},interest:{required:!0},other_category:{required:!0}}}),jQuery("#interest").mask("00000"),jQuery("#tenor").mask("00"),jQuery("#amount").mask("0000000000")},CreateComponent.prototype.getLoanCategory=function(){var e=this;this.createService.getCategory().then(function(t){var n=t.meta.message,a=JSON.stringify(t.meta.code),o=t.data.loan_categories;"4"===a.charAt(0)&&e.handleError(n),"2"===a.charAt(0)&&e.handleSuccess(o)})},CreateComponent.prototype.handleError=function(e){"unauthorized"===e&&(alert("Maaf akses token tidak terdaftar"),this.router.navigate(["/dashboard/sign-out"]))},CreateComponent.prototype.handleSuccess=function(e){this.loan_categories=e},CreateComponent.prototype.getLoanCategoryId=function(e){this.categoryLoan=e,this.loanCategory=e},CreateComponent.prototype.cancelLoan=function(){this.router.navigateByUrl("/dashboard/other-user-action/loan")},CreateComponent.prototype.createLoan=function(){if(jQuery("#FormLoan").valid())try{this.loan.due_date=jQuery("#due_date").val()}finally{this.formVerify=1}else alert("Data tidak valid")},CreateComponent.prototype.encodeImage=function(e){var t=new FileReader;return t.readAsDataURL(e),t},CreateComponent.prototype.postLoan=function(){var e=this;this.http.post(this.postLoanUrl,this.loan,this.options).map(function(e){return e.json()}).subscribe(function(t){t.meta.code,t.meta.message;alert("Investasi berhasil dibuat"),e.router.navigateByUrl("/dashboard/other-user-action/loan")},function(t){var n=JSON.parse(t._body),a=n.meta.message;n.meta.code;return"unauthorized"==a?(alert("Maaf session anda telah habis silahkan login kembali"),e.router.navigateByUrl("/dashboard/sign-out")):void("Password salah!"==a&&(e.dataLoan=0,alert("Password salah")))})},CreateComponent.prototype.calculationLoan=function(){if(jQuery("#FormLoan").valid()){this.loan.due_date=jQuery("#due_date").val(),this.dataCalculation.bunga=this.loan.interest,this.dataCalculation.jumlah=this.loan.amount,this.dataCalculation.tenor=this.loan.tenor;var e=document.getElementById("images"),t=e.files[0],n=new Uint8Array([1,2,3]),a=n.buffer,o=new Blob([a]);void 0==t&&(t=o),this.encodeImage(t).onload=function(e,t){var n=this;try{var a=e.target.result.split(",")[1];"AQID"!=a?this.loan.image=a:this.loan.image=null}finally{this.createService.calculationLoan(this.dataCalculation).then(function(e){try{n.simulation=e.data.simulation_result}finally{n.dataLoan=1}})}}.bind(this)}else alert("Data tidak valid")},CreateComponent.prototype.hideVerify=function(e){this.formVerify=e},CreateComponent=__decorate([a.Component({selector:"create",template:n(946),providers:[r.CreateService]}),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.Http&&o.Http)&&e||Object,"function"==typeof(t="undefined"!=typeof i.Router&&i.Router)&&t||Object,"function"==typeof(s="undefined"!=typeof r.CreateService&&r.CreateService)&&s||Object])],CreateComponent);var e,t,s}();t.CreateComponent=s},700:function(e,t,n){"use strict";var a=n(0),o=n(50),i=n(689),r=n(795),s=function(){function VerifyComponent(e,t,n){this.create=e,this.router=t,this.verifyService=n,this.loan=this.create.loan,this.dataConfirmInvest=0,this.statusConfirm=1,this.dataLoan={access_token:null,loan_name:null,loan_category:0,other_category:null,image:null,description:null,amount:null,due_date:"",interest:null,tenor:null,password:null},this.statusForm=new a.EventEmitter}return VerifyComponent.prototype.ngOnInit=function(){jQuery("#ModalForm").modal({backdrop:"static",keyboard:!1})},VerifyComponent.prototype.cancelConfirmLoan=function(){jQuery("#ModalForm").modal("toggle"),this.router.navigateByUrl("dashboard/other-user-action/loan")},VerifyComponent.prototype.confirmLoan=function(){var e=this;jQuery("#confirmLoanForm").valid()?(this.statusConfirm=0,this.verifyService.createInvest(this.dataLoan).then(function(t){var n=t.meta.message,a=JSON.stringify(t.meta.code);"4"==a.charAt(0)&&e.handleError(n),"2"==a.charAt(0)&&e.handleSuccess()})):alert("Harap masukan password")},VerifyComponent.prototype.handleError=function(e){try{"Saldo Anda tidak mencukupi."==e?alert("Saldo Anda tidak mencukupi."):alert("Password anda salah")}finally{this.statusConfirm=1}},VerifyComponent.prototype.handleSuccess=function(){alert("Pinjaman berhasil dibuat"),jQuery("#ModalForm").modal("toggle"),this.router.navigateByUrl("/dashboard/other-user-action/loan")},VerifyComponent.prototype.hideModal=function(){this.statusForm.emit(0)},__decorate([a.Input(),__metadata("design:type",Object)],VerifyComponent.prototype,"dataLoan",void 0),__decorate([a.Output(),__metadata("design:type",Object)],VerifyComponent.prototype,"statusForm",void 0),VerifyComponent=__decorate([a.Component({selector:"verify",template:n(947),providers:[r.VerifyService]}),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.CreateComponent&&i.CreateComponent)&&e||Object,"function"==typeof(t="undefined"!=typeof o.Router&&o.Router)&&t||Object,"function"==typeof(s="undefined"!=typeof r.VerifyService&&r.VerifyService)&&s||Object])],VerifyComponent);var e,t,s}();t.VerifyComponent=s},786:function(e,t,n){"use strict";var a=n(0),o=n(87);n(403);var i=function(){function CreateService(e){this.http=e,this.headers=new o.Headers({"Content-Type":"application/json",API_KEY:"01b19716dfe44d0e9c656903429c3e9c65d0b243"}),this.options=new o.RequestOptions({headers:this.headers}),this.simulationUrl="https://masscredit-api.stagingapps.net/user/loan/simulate",this.categoryUrl="https://masscredit-api.stagingapps.net/master/loan-category"}return CreateService.prototype.calculationLoan=function(e){return this.http.post(this.simulationUrl,e,this.options).toPromise().then(function(e){return e.json()}).catch(this.handleError)},CreateService.prototype.handleError=function(e){var t=JSON.parse(e._body);return t},CreateService.prototype.getCategory=function(){return this.http.get(this.categoryUrl,this.options).toPromise().then(function(e){return e.json()}).catch(this.handleError)},CreateService=__decorate([a.Injectable(),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.Http&&o.Http)&&e||Object])],CreateService);var e}();t.CreateService=i},787:function(e,t,n){"use strict";var a=n(0),o=n(50),i=n(87),r=n(153),s=n(72),l=n(689),d=n(789),c=n(794),u=n(790),p=n(793);t.routes=[{path:"",component:l.CreateComponent}];var m=function(){function CreateModule(){}return CreateModule.routes=t.routes,CreateModule=__decorate([a.NgModule({declarations:[l.CreateComponent,d.DueDateComponent,c.VerifyComponent,u.NameOtherCategoryComponent,p.FormVerifyComponent],imports:[i.HttpModule,r.FormsModule,s.CommonModule,o.RouterModule.forChild(t.routes)],providers:[]}),__metadata("design:paramtypes",[])],CreateModule)}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=m},788:function(e,t,n){"use strict";var a=n(0),o=n(689),i=function(){function DueDateComponent(e){this.create=e,this.loan=this.create.loan}return DueDateComponent.prototype.ngOnInit=function(){jQuery("#due_date").datepicker({format:"yyyy-mm-dd",startDate:"today",autoclose:!0,todayHighlight:!0})},DueDateComponent=__decorate([a.Component({selector:"due-date",template:' \n\t<div class="form-group">\n    <div class="col-md-12">\n    <span class="required">*</span>\n    <input  type="text" placeholder="Batas Akhir Penawaran " name="due_date" class="form-control input-md datepicker" id="due_date" [(ngModel)]="loan.due_date">\n    </div>\n  </div>\n\t'}),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.CreateComponent&&o.CreateComponent)&&e||Object])],DueDateComponent);var e}();t.DueDateComponent=i},789:function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(788))},790:function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(791))},791:function(e,t,n){"use strict";var a=n(0),o=n(689),i=function(){function NameOtherCategoryComponent(e){this.create=e,this.loan=this.create.loan}return NameOtherCategoryComponent=__decorate([a.Component({selector:"name-other-category",template:' \n\t<div class="form-group">\n     <div class="col-md-12">\n        <span class="required">*</span>\n        <input type="text" id="other_category" name="other_category" [(ngModel)]="loan.other_category" placeholder="Nama Category" class="form-control input-md">\n     </div>\n  </div>\n\t'}),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.CreateComponent&&o.CreateComponent)&&e||Object])],NameOtherCategoryComponent);var e}();t.NameOtherCategoryComponent=i},792:function(e,t,n){"use strict";var a=n(0),o=n(700),i=function(){function FormVerifyComponent(e){this.verifyComponent=e,this.dataLoan=this.verifyComponent.dataLoan}return FormVerifyComponent.prototype.ngOnInit=function(){jQuery("#confirmLoanForm").validate({rules:{password:{required:!0}}})},FormVerifyComponent=__decorate([a.Component({selector:"form-verify",template:'\n\t\t<form name="confirmLoanForm" id="confirmLoanForm">\n\t  <div class="col-md-6">\n\t    <div class="form-group">\n        <span class="required">*</span>\n        <input type="password" name="password" placeholder="Password" class="form-control input-md" id="password" [(ngModel)]="dataLoan.password">\n\t    </div>\n\t  </div>\n\t</form>\n\t'}),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.VerifyComponent&&o.VerifyComponent)&&e||Object])],FormVerifyComponent);var e}();t.FormVerifyComponent=i},793:function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(792))},794:function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(700))},795:function(e,t,n){"use strict";var a=n(0),o=n(87);n(403);var i=function(){function VerifyService(e){this.http=e,this.headers=new o.Headers({"Content-Type":"application/json",API_KEY:"01b19716dfe44d0e9c656903429c3e9c65d0b243"}),this.options=new o.RequestOptions({headers:this.headers}),this.loanUrl="https://masscredit-api.stagingapps.net/user/loan/new"}return VerifyService.prototype.createInvest=function(e){return this.http.post(this.loanUrl,e,this.options).toPromise().then(function(e){return e.json()}).catch(this.handleError)},VerifyService.prototype.handleError=function(e){var t=JSON.parse(e._body);return t},VerifyService=__decorate([a.Injectable(),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.Http&&o.Http)&&e||Object])],VerifyService);var e}();t.VerifyService=i},946:function(e,t){e.exports='<div class="row">\n  <div class="col-xs-12">\n  <div class="box-body">\n  <div class="row">\n    <div class="col-xs-12">\n    <form class="form-center" (ngSubmit)="calculationLoan()" name="FormLoan" id="FormLoan">\n      <div class="row">\n      <div class="col-xs-6">\n      <div class="box-header">\n        <h2 class="box-title">Tambah Pinjaman</h2>\n      </div>\n      </div>\n        <div class="col-xs-5">\n        <button class="btn-simulation pull-right col-center" type="submit">KALKULASI</button>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-md-6">\n          <div class="form-group">\n            <div class="col-md-12">\n              <span class="required">*</span>\n              <input type="text" name="loan_name" placeholder="Nama pinjaman" class="form-control input-md" id="loan_name" [(ngModel)]="loan.loan_name">\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-md-12">\n              <span class="required">*</span>\n              <select class="form-control input-md" name="loan_category" id="loan_category" (change)="getLoanCategoryId($event.target.value)" [(ngModel)]="loan.loan_category">\n                <option value="0" disabled>Kategori Pinjaman</option>\n                <option *ngFor="let data of loan_categories" [value]="data.id">{{ data.description }}</option>\n              </select>\n            </div>\n          </div>\n          <!-- if user choose other category -->\n          <name-other-category *ngIf="loanCategory == -1"></name-other-category>\n          <div class="form-group">\n            <div class="col-md-12">\n              <span class="required">*</span>\n              <textarea placeholder="Deskripsi" class="form-control input-md" name="description" id="description" [(ngModel)]="loan.description"></textarea>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-6">\n          <div class="form-group">\n             <div class="col-md-12">\n              <label>Foto Pinjaman</label>\n              <input type="file" id="images">\n             </div>\n          </div>\n          <div class="form-group">\n            <div class="col-md-10">\n              <span class="required">*</span>\n              <input type="text" placeholder="Nominal Investasi" class="form-control input-md" name="amount" id="amount" [(ngModel)]="loan.amount">\n            </div>\n            <label class="unit">Rupiah</label>\n          </div>\n          <!-- component due-date -->\n          <due-date></due-date>\n          <div class="form-group">\n            <div class="col-md-10 clearfix">\n              <span class="required">*</span>\n              <input type="text" placeholder="Bunga" class="form-control input-md"  name="interest" id="interest" [(ngModel)]="loan.interest">\n            </div>\n            <label class="unit">%/bulan</label>\n          </div>\n          <div class="form-group">\n            <div class="col-md-10 clearfix">\n              <span class="required">*</span>\n              <input type="text" placeholder="Tenor" class="form-control input-md" maxlength="2" minlength="1"  name="tenor" id="tenor" [(ngModel)]="loan.tenor">\n            </div>\n            <label class="unit">Bulan</label>\n          </div>\n        </div>\n      </div>\n    </form>\n    </div>\n  </div>\n  </div>\n  </div>\n</div>\n\n<div class="row">\n  <hr>\n  <div class="col-xs-12">\n    <br>\n    <div class="box-header" align="center">\n      <h2 class="box-title">Kalkulasi Pinjaman</h2>\n    </div>\n    <div class="box-body">\n      <div class="row">\n      <div class="col-xs-12">\n      <form name="FormLoan" id="FormLoan">\n        <fieldset disabled>\n          <div class="col-md-6">\n          <div class="form-group">\n            <div class="col-xs-5">\n              <label class="unit">Nominal</label>\n            </div>\n            <div class="col-xs-7">\n              <input type="text" name="-" placeholder="-" class="form-control input-md" id="nominal" [(ngModel)]="simulation.nominal">\n            </div>\n         </div>\n          <div class="form-group">\n            <div class="col-xs-5">\n              <label class="unit">Pokok</label>\n            </div>\n            <div class="col-md-7">\n              <input type="text" name="-" placeholder="-" class="form-control input-md" id="pokok" [(ngModel)]="simulation.pokok"> \n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-xs-5">\n              <label class="unit">Bunga</label>\n            </div>\n            <div class="col-md-7">\n              <input type="text" placeholder="-" class="form-control input-md" name="bunga" id="bunga" [(ngModel)]="simulation.bunga">\n            </div>\n          </div>\n          </div>\n          <div class="col-md-6">\n          <div class="form-group">\n            <div class="col-xs-5">\n              <label class="unit">Cicilan/bulan</label>\n            </div>\n            <div class="col-md-7">\n              <input type="text" placeholder="-" class="form-control" name="cicilan_per_bulan" id="cicilan_per_bulan" [(ngModel)]="simulation.cicilan_perbulan">\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-xs-5">\n              <label class="unit">Denda</label>\n            </div>\n            <div class="col-md-7">\n              <input type="text" placeholder="-" class="form-control input-md" name="denda" id="denda" [(ngModel)]="simulation.denda">\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="col-xs-5">\n              <label class="unit">Biaya admin</label>\n            </div>\n            <div class="col-md-7">\n              <input type="text" placeholder="-" class="form-control input-md" name="charge_fee" id="charge_fee" [(ngModel)]="simulation.charge_fee">\n            </div>\n          </div>\n        </div>\n        </fieldset>\n      </form>\n        <div *ngIf="dataLoan == 1">\n        <div class="col-md-12">\n          <div class="form-group">\n          <div class="col-md-6 col-center">\n            <div align="center">\n            <span class="input-group-addon">\n              <input type="checkbox">\n              <label>Saya setuju dengan syarat dan ketentuan</label>\n            </span>\n            <button class="btn" (click)="createLoan()">SIMPAN</button>\n            </div>\n          </div>\n          </div>\n        </div>\n        </div>\n        <!-- component password -->\n        <verify *ngIf="formVerify == 1" (statusForm)="hideVerify($event)" [dataLoan]="loan"></verify>\n      </div>\n      </div>\n    </div>\n  </div>\n</div>'},947:function(e,t){e.exports='<div class="modal fade" id="ModalForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="z-index: 9000">\n<div class="modal-dialog  modal-style">\n\t<div class="modal-content">\n\t  <div class="modal-header">\n\t    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" (click)="hideModal()">&times;</button>\n\t\t  <h4 class="modal-title">Masukan Password untuk verifikasi</h4>\n\t  </div>\n\t  <div class="modal-body">\n\t   <div class="row">\n\t    <div align="center" *ngIf="statusConfirm == 0"> \n\t\t    <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>\n\t\t    <span class="sr-only">Loading...</span>\n\t\t  </div>\n\t\t  <div *ngIf="statusConfirm == 1">\n\t\t  <!-- component form -->\n\t\t  <form-verify></form-verify>\n\t\t  <div class="col-md-6">\n\t\t    <div class="form-group">\n\t\t        <div class="col-md-12">\n\t\t          <button class="btn btn-default" (click)="cancelConfirmLoan()">Batal</button>\n\t\t          <button class="btn btn-red" (click)="confirmLoan()">Verifikasi</button>\n\t\t        </div>\n\t\t    </div>\n\t\t  </div>\n\t\t  </div>\n\t   </div>\n\t  </div>\n\t</div>\n</div>\n</div>'}});